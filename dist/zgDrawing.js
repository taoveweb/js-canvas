!function(e){var t={};function n(a){if(t[a])return t[a].exports;var i=t[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(a,i,function(t){return e[t]}.bind(null,i));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t){var n,a,i,o,r,c,l,s,u,d,f,v,p,h;n=window,d={canvas_w:1e3,canvas_h:600,canvas_id:"canvas",color:"black",line:{line:1,lineCap:"round",lineJoin:"round",pattern:"line",color:"#000000"},rec:{line:3,lineCap:"round",lineJoin:"round",pattern:"line",color:"#4B0082"},arc:{line:3,lineCap:"round",lineJoin:"round",pattern:"line",color:"#4B0082"},font:{color:"#FF0000",spec:"small"},arrows:{},pattern:"font"},f=[],v=[],p=[],h=!1,n.Drawing=function(e={},t=null){for(let t in e)d[t]=e[t];u=document.getElementById(d.canvas_id),d.canvas_w=u.offsetWidth,d.canvas_h=u.offsetHeight,(a=document.createElement("canvas")).setAttribute("width",d.canvas_w),a.setAttribute("height",d.canvas_h),u.appendChild(a),u.insertAdjacentHTML("afterbegin",'\n                <div class="canvas-nav">\n                  <div class="item _withdraw">撤回</div>\n                  <div class="item _line">线</div>\n                  <div class="item _rec">矩形</div>\n                  <div class="item _arc">圆</div>\n                  <div class="item _font">写字</div>\n                  <div class="item _arrows">箭头</div>\n                  \n                </div>\n            '),document.querySelector(".canvas-nav ._withdraw").addEventListener("click",function(e){f.length>0&&(v=[],p=[],1==f.length?(f.pop(),a.getContext("2d").clearRect(0,0,d.canvas_w,d.canvas_h)):(f.pop(),a.getContext("2d").putImageData(f[f.length-1],0,0)),console.log(f))}),document.querySelector(".canvas-nav ._font").addEventListener("click",function(e){d.pattern="font"}),document.querySelector(".canvas-nav ._line").addEventListener("click",function(e){d.pattern="line"}),document.querySelector(".canvas-nav ._rec").addEventListener("click",function(e){d.pattern="rce"}),document.querySelector(".canvas-nav ._arc").addEventListener("click",function(e){d.pattern="arc"});const n=e=>{let t=a.getContext("2d");return t.lineCap=d[e].lineCap,t.lineJoin=d[e].lineJoin,t.lineWidth=d[e].line,t.strokeStyle=d[e].color,t},g=(e,t,n)=>{let a=e.getBoundingClientRect();return{x:t-a.left*(e.width/a.width),y:n-a.top*(e.height/a.height)}};function m(e,t,n,a){this.x=e,this.y=t,this.width=n,this.height=a}function y(e,t,n,a){this.x=e,this.y=t,this.xr=n,this.yr=a}function _(e,t,n,a,i){e.save();var o=a>i?a:i,r=a/o,c=i/o;e.scale(r,c),e.beginPath(),e.arc(t/r,n/c,o,0,2*Math.PI,!1),e.closePath(),e.restore(),e.stroke()}a.onmousedown=function(e){if("line"==d.pattern){h=!0;let t=g(a,e.clientX,e.clientY);l=t.x,s=t.y,(o=n("line")).beginPath(),o.moveTo(l,s)}else if("rce"==d.pattern){h=!0;let t=g(a,e.clientX,e.clientY);l=t.x,s=t.y,r=n("rec")}else if("arc"==d.pattern){h=!0;let t=g(a,e.clientX,e.clientY);l=t.x,s=t.y,c=n("arc")}else if("font"==d.pattern){let t=g(a,e.clientX,e.clientY),n=document.querySelector("._canvas .canvas-textarea");n?n.onblur=function(e){if(n.value){let e=a.getContext("2d"),t=n.offsetTop;switch(d.font.spec){case"small":e.font="14px Georgia normal",t+=14;break;case"middle":e.font="18px Georgia normal",t+=18;break;default:e.font="24px Georgia bold",t+=24}e.fillStyle=d.font.color,e.fillText(n.value,n.offsetLeft,t),u.removeChild(n),f.push(a.getContext("2d").getImageData(0,0,d.canvas_w,d.canvas_h))}}:((n=document.createElement("textarea")).setAttribute("class","canvas-textarea"),u.appendChild(n),n.style.left=t.x+"px",n.style.top=t.y+"px",n.focus())}},a.onmousemove=e=>{if("line"==d.pattern){if(h){let t=g(a,e.clientX,e.clientY),{x:n,y:i}=t;o.lineTo(n,i),o.stroke()}}else if("rce"==d.pattern){if(h){let t=g(a,e.clientX,e.clientY);r.clearRect(0,0,d.canvas_w,d.canvas_h),f.length>0&&r.putImageData(f[f.length-1],0,0),v.forEach(function(e,t,n){r.strokeRect(e.x,e.y,e.width,e.height)});let n=t.x-l,o=t.y-s;r.strokeRect(l,s,n,o),i=new m(l,s,n,o)}}else if("arc"==d.pattern&&h){let t=g(a,e.clientX,e.clientY);c.clearRect(0,0,d.canvas_w,d.canvas_h),f.length>0&&c.putImageData(f[f.length-1],0,0),p.forEach(function(e,t,n){_(c,e.x,e.y,e.xr,e.yr)});let n=Math.abs((t.x-l)/2),o=Math.abs((t.y-s)/2),r=t.x-(t.x-l)/2,u=t.y-(t.y-s)/2;_(c,r,u,n,o),i=new y(r,u,n,o)}},a.onmouseup=function(){"line"==d.pattern?(h=!1,f.push(a.getContext("2d").getImageData(0,0,d.canvas_w,d.canvas_h))):"rce"==d.pattern?(h=!1,v.push(i),f.push(a.getContext("2d").getImageData(0,0,d.canvas_w,d.canvas_h))):"arc"==d.pattern&&(h=!1,p.push(i),f.push(a.getContext("2d").getImageData(0,0,d.canvas_w,d.canvas_h))),console.log(f)},m.prototype={constructor:m,getConfig:function(){return this}},y.prototype={constructor:y,getConfig:function(){return this}},window.onresize=function(){}},new Drawing}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiZSIsImNhbnZhcyIsInRlbXBvcmFyeSIsImNhbnZhc19saW5lIiwiY2FudmFzX3JjZSIsImNhbnZhc19hcmMiLCJjX3giLCJjX3kiLCJjYW52YU5vZGUiLCJvcHRpb25zIiwicmVjb3JkIiwicmVjcyIsImFyY3MiLCJpc0FsbG93RHJhd0xpbmUiLCJ3aW5kb3ciLCJjYW52YXNfdyIsImNhbnZhc19oIiwiY2FudmFzX2lkIiwiY29sb3IiLCJsaW5lIiwibGluZUNhcCIsImxpbmVKb2luIiwicGF0dGVybiIsInJlYyIsImFyYyIsImZvbnQiLCJzcGVjIiwiYXJyb3dzIiwiRHJhd2luZyIsImluaXRpYWxpemUiLCJmdW4iLCJ2IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsIm9mZnNldFdpZHRoIiwib2Zmc2V0SGVpZ2h0IiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsImFwcGVuZENoaWxkIiwiaW5zZXJ0QWRqYWNlbnRIVE1MIiwicXVlcnlTZWxlY3RvciIsImFkZEV2ZW50TGlzdGVuZXIiLCJsZW5ndGgiLCJwb3AiLCJnZXRDb250ZXh0IiwiY2xlYXJSZWN0IiwicHV0SW1hZ2VEYXRhIiwiY29uc29sZSIsImxvZyIsImNhbnZhc1BhcmFtZXRlciIsInRpZXIiLCJsaW5lV2lkdGgiLCJzdHJva2VTdHlsZSIsIndpbmRvd1RvQ2FudmFzIiwieCIsInkiLCJyZWN0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwibGVmdCIsIndpZHRoIiwidG9wIiwiaGVpZ2h0IiwiUmVjWHkiLCJ4eCIsInl5IiwidGhpcyIsIkFyY1h5IiwieHIiLCJ5ciIsIkVsbGlwc2VUd28iLCJjb250ZXh0IiwiYSIsImIiLCJzYXZlIiwicmF0aW9YIiwicmF0aW9ZIiwic2NhbGUiLCJiZWdpblBhdGgiLCJNYXRoIiwiUEkiLCJjbG9zZVBhdGgiLCJyZXN0b3JlIiwic3Ryb2tlIiwib25tb3VzZWRvd24iLCJlbGUiLCJjbGllbnRYIiwiY2xpZW50WSIsIm1vdmVUbyIsInRleHRhcmVhIiwib25ibHVyIiwiY2FudmFzX2ZvbnQiLCJvZmZzZXRUb3AiLCJmaWxsU3R5bGUiLCJmaWxsVGV4dCIsIm9mZnNldExlZnQiLCJyZW1vdmVDaGlsZCIsInB1c2giLCJnZXRJbWFnZURhdGEiLCJzdHlsZSIsImZvY3VzIiwib25tb3VzZW1vdmUiLCJsaW5lVG8iLCJmb3JFYWNoIiwiYXJyIiwic3Ryb2tlUmVjdCIsInciLCJoIiwiYWJzIiwib25tb3VzZXVwIiwiY29uc3RydWN0b3IiLCJnZXRDb25maWciLCJvbnJlc2l6ZSJdLCJtYXBwaW5ncyI6ImFBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVUMsUUFHbkMsSUFBSUMsRUFBU0osRUFBaUJFLEdBQVksQ0FDekNHLEVBQUdILEVBQ0hJLEdBQUcsRUFDSEgsUUFBUyxJQVVWLE9BTkFJLEVBQVFMLEdBQVVNLEtBQUtKLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNGLEdBRy9ERyxFQUFPRSxHQUFJLEVBR0pGLEVBQU9ELFFBS2ZGLEVBQW9CUSxFQUFJ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OEQsRUFBS1UsS0FBSzZCLEtBQUt2QixFQUFPLEVBQUU3RSxHQUFLLEdBQUd3RCxFQUFLcUIsRUFBTyxHQUFHQSxFQUFPLEVBQUU5RSxHQUFLLEVBQUUwRCxFQUFLb0IsRUFBTyxHQUFHQSxFQUFPLEVBQUU3RSxHQUFLLEVBQ2hJOEQsRUFBV2hFLEVBQVkwRCxFQUFHQyxFQUFHRyxFQUFHQyxHQUNoQ2xFLEVBQVksSUFBSWdFLEVBQU1ILEVBQUdDLEVBQUdHLEVBQUdDLEtBTTNDbkUsRUFBTzJHLFVBQVksV0FFTyxRQUFuQm5HLEVBQVFhLFNBQ1BULEdBQWtCLEVBQ2xCSCxFQUFPc0YsS0FBSy9GLEVBQU8yQyxXQUFXLE1BQU1xRCxhQUFhLEVBQUcsRUFBR3hGLEVBQVFNLFNBQVVOLEVBQVFPLFlBQ3pELE9BQW5CUCxFQUFRYSxTQUNiVCxHQUFrQixFQUNsQkYsRUFBS3FGLEtBQUs5RixHQUNWUSxFQUFPc0YsS0FBSy9GLEVBQU8yQyxXQUFXLE1BQU1xRCxhQUFhLEVBQUcsRUFBR3hGLEVBQVFNLFNBQVVOLEVBQVFPLFlBQ3pELE9BQW5CUCxFQUFRYSxVQUNiVCxHQUFrQixFQUNsQkQsRUFBS29GLEtBQUs5RixHQUNWUSxFQUFPc0YsS0FBSy9GLEVBQU8yQyxXQUFXLE1BQU1xRCxhQUFhLEVBQUcsRUFBR3hGLEVBQVFNLFNBQVVOLEVBQVFPLFlBR3JGK0IsUUFBUUMsSUFBSXRDLElBVWhCb0QsRUFBTWxFLFVBQVksQ0FDZGlILFlBQWMvQyxFQUNkZ0QsVUFBWSxXQUNSLE9BQU83QyxPQVVmQyxFQUFNdEUsVUFBWSxDQUNkaUgsWUFBYzNDLEVBQ2Q0QyxVQUFZLFdBQ1IsT0FBTzdDLE9Ba0JmbkQsT0FBT2lHLFNBQVcsY0F1RTFCLElBQUluRiIsImZpbGUiOiJ6Z0RyYXdpbmcuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCIoZnVuY3Rpb24gKGUpIHtcclxuICAgIC8v5L+h5oGv6YWN572uXHJcbiAgICB2YXIgb3B0aW9ucyA9IHtcclxuICAgICAgICBjYW52YXNfdzoxMDAwLC8v55S75biD55qE5a695bqmXHJcbiAgICAgICAgY2FudmFzX2g6NjAwLC8v55S75biD55qE6auY5bqmXHJcbiAgICAgICAgY2FudmFzX2lkOidjYW52YXMnLC8v5aSW5qGGSURcclxuICAgICAgICBjb2xvcjonYmxhY2snLC8v55S756yU6aKc6ImyXHJcbiAgICAgICAgbGluZTp7bGluZToxLGxpbmVDYXA6XCJyb3VuZFwiLGxpbmVKb2luOlwicm91bmRcIixwYXR0ZXJuOidsaW5lJyxjb2xvcjpcIiMwMDAwMDBcIn0sLy/nlLvnrJRcclxuICAgICAgICByZWMgOntsaW5lOjMsbGluZUNhcDpcInJvdW5kXCIsbGluZUpvaW46XCJyb3VuZFwiLHBhdHRlcm46J2xpbmUnLGNvbG9yOlwiIzRCMDA4MlwifSwvL+m7mOiupOefqeW9ouWPguaVsFxyXG4gICAgICAgIGFyYyA6e2xpbmU6MyxsaW5lQ2FwOlwicm91bmRcIixsaW5lSm9pbjpcInJvdW5kXCIscGF0dGVybjonbGluZScsY29sb3I6XCIjNEIwMDgyXCJ9LC8v6buY6K6k5ZyG5Y+C5pWwXHJcbiAgICAgICAgZm9udCA6e2NvbG9yOlwiI0ZGMDAwMFwiLHNwZWM6XCJzbWFsbFwifSwvL+m7mOiupOWchuWPguaVsCBzbWFsbCBtaWRkbGUgYmlnXHJcbiAgICAgICAgYXJyb3dzIDp7fSwvL+m7mOiupOWchuWPguaVsCDlsI8gMTJweCDkuK0gMTZweCDlpKcgMjRweFxyXG4gICAgICAgIHBhdHRlcm46J2ZvbnQnLy/pu5jorqTmqKHlvI8gbGluZTrnur8gcmVj77ya55+p5b2iIGFyY++8muWchiBhcnJvd3M6566t5aS0IGZvbnQ65a2XXHJcbiAgICB9O1xyXG4gICAgdmFyIGNhbnZhcywvL+WIm+W7uueUu+W4g+iKgueCuVxyXG4gICAgICAgIHJlY29yZCA9IFtdLC8v5pON5L2c6K6w5b2V5YC8XHJcbiAgICAgICAgcmVjcyAgPSBbXSwvL+WtmOWCqOefqeW9oueUu+W4g+mbhuWQiFxyXG4gICAgICAgIGFyY3MgID0gW10sLy/lrZjlgqjlnIblvaLnlLvluIPpm4blkIhcclxuICAgICAgICB0ZW1wb3JhcnksLy/kuLTml7blrZjlgqjlj5jph49cclxuICAgICAgICBjYW52YXNfbGluZSwvL+S4tOaXtueUu+W4g1xyXG4gICAgICAgIGNhbnZhc19yY2UsLy/kuLTml7bnlLvluINcclxuICAgICAgICBjYW52YXNfYXJjLC8v5Li05pe255S75biDXHJcbiAgICAgICAgY194LC8v5Li05pe26byg5qCH54K55Ye75Z2Q5qCHXHJcbiAgICAgICAgY195LC8v5Li05pe26byg5qCH54K55Ye7WeWdkOagh1xyXG4gICAgICAgIGNhbnZhTm9kZSwvL+iOt+WPlueUu+W4g+WkluahhuiKgueCuVxyXG4gICAgICAgIGlzQWxsb3dEcmF3TGluZSA9IGZhbHNlLy/ot5/ouKrpvKDmoIfkuovku7ZcclxuICAgICAgICA7XHJcblxyXG5cclxuICAgIC8v5a6a5LmJ5YWo5bGA5Y+Y6YePXHJcbiAgICBlLkRyYXdpbmcgPSBmdW5jdGlvbihpbml0aWFsaXplID0ge30sZnVuPW51bGwpe1xyXG4gICAgICAgIC8v5Yid5aeL5YyW6YWN572uXHJcbiAgICAgICAgZm9yIChsZXQgdiBpbiBpbml0aWFsaXplKXtcclxuICAgICAgICAgICAgb3B0aW9uc1t2XSA9IGluaXRpYWxpemVbdl07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8v5Yid5aeL5YyW6IqC54K5XHJcbiAgICAgICAgY2FudmFOb2RlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQob3B0aW9ucy5jYW52YXNfaWQpO1xyXG4gICAgICAgIG9wdGlvbnMuY2FudmFzX3cgPSBjYW52YU5vZGUub2Zmc2V0V2lkdGg7XHJcbiAgICAgICAgb3B0aW9ucy5jYW52YXNfaCA9IGNhbnZhTm9kZS5vZmZzZXRIZWlnaHQ7XHJcbiAgICAgICAgLy/liJvlu7og55S75biDXHJcbiAgICAgICAgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XHJcbiAgICAgICAgY2FudmFzLnNldEF0dHJpYnV0ZSgnd2lkdGgnLCBvcHRpb25zLmNhbnZhc193KTtcclxuICAgICAgICBjYW52YXMuc2V0QXR0cmlidXRlKCdoZWlnaHQnLCBvcHRpb25zLmNhbnZhc19oKTtcclxuICAgICAgICBjYW52YU5vZGUuYXBwZW5kQ2hpbGQoY2FudmFzKTtcclxuXHJcbiAgICAgICAgLy/liJvlu7roj5zljZVcclxuICAgICAgICBzZXROYXZzKCk7XHJcblxyXG4gICAgICAgIC8v6K6+572u55S75biD55qE5Y+C5pWwXHJcbiAgICAgICAgY29uc3QgY2FudmFzUGFyYW1ldGVyID0gKGMpID0+IHtcclxuICAgICAgICAgICAgLy/orr7nva7lj4LmlbBcclxuICAgICAgICAgICAgbGV0IHRpZXIgPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpOy8vMmRcclxuICAgICAgICAgICAgdGllci5saW5lQ2FwID0gb3B0aW9uc1tjXS5saW5lQ2FwOy8v6K6+572u57uT5p2f56uv54K55qC35byP44CCXHJcbiAgICAgICAgICAgIHRpZXIubGluZUpvaW4gPSBvcHRpb25zW2NdLmxpbmVKb2luOy8v5ouQ6KeS57G75Z6LXHJcbiAgICAgICAgICAgIHRpZXIubGluZVdpZHRoID0gb3B0aW9uc1tjXS5saW5lOy8v6K6+572u55S756yU55qE57KX57uGXHJcbiAgICAgICAgICAgIHRpZXIuc3Ryb2tlU3R5bGUgPSBvcHRpb25zW2NdLmNvbG9yOy8v6K6+572u6Kem56yU55qE6aKc6ImyXHJcbiAgICAgICAgICAgIHJldHVybiB0aWVyO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8v6K6h566X6byg5qCH55u45a+55LqO55S75biD55qE5L2N572uXHJcbiAgICAgICAgY29uc3Qgd2luZG93VG9DYW52YXMgPSAoY2FudmFzLCB4LCB5KSA9PiB7XHJcbiAgICAgICAgICAgIC8v6I635Y+WY2FudmFz5YWD57Sg6Led56a756qX5Y+j55qE5LiA5Lqb5bGe5oCn77yMTURO5LiK5pyJ6Kej6YeKXHJcbiAgICAgICAgICAgIGxldCByZWN0ID0gY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgICAgICAvL3jlkox55Y+C5pWw5YiG5Yir5Lyg5YWl55qE5piv6byg5qCH6Led56a756qX5Y+j55qE5Z2Q5qCH77yM54S25ZCO5YeP5Y67Y2FudmFz6Led56a756qX5Y+j5bem6L655ZKM6aG26YOo55qE6Led56a744CCXHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICB4OiB4IC0gcmVjdC5sZWZ0ICogKGNhbnZhcy53aWR0aC9yZWN0LndpZHRoKSxcclxuICAgICAgICAgICAgICAgIHk6IHkgLSByZWN0LnRvcCAqIChjYW52YXMuaGVpZ2h0L3JlY3QuaGVpZ2h0KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgY2FudmFzLm9ubW91c2Vkb3duID0gZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgICAgIC8v6byg5qCH54K55Ye7XHJcbiAgICAgICAgICAgIGlmKG9wdGlvbnMucGF0dGVybiA9PSBcImxpbmVcIil7XHJcbiAgICAgICAgICAgICAgICBpc0FsbG93RHJhd0xpbmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgLy/ojrflj5bpvKDmoIfmjInkuIvnmoTngrnnm7jlr7ljYW52YXPnmoTlnZDmoIfjgIJcclxuICAgICAgICAgICAgICAgIGxldCBlbGUgPSB3aW5kb3dUb0NhbnZhcyhjYW52YXMsIGUuY2xpZW50WCwgZS5jbGllbnRZKTtcclxuICAgICAgICAgICAgICAgIC8vZXM255qE6Kej5p6E6LWL5YC8XHJcbiAgICAgICAgICAgICAgICBjX3ggID0gZWxlWyd4J107XHJcbiAgICAgICAgICAgICAgICBjX3kgID0gZWxlWyd5J107XHJcbiAgICAgICAgICAgICAgICAvL+WIm+W7uue6v+adoeeUu+W4g1xyXG4gICAgICAgICAgICAgICAgY2FudmFzX2xpbmUgPSBjYW52YXNQYXJhbWV0ZXIoJ2xpbmUnKTtcclxuICAgICAgICAgICAgICAgIC8v57uY5Yi26LW354K544CCXHJcbiAgICAgICAgICAgICAgICBjYW52YXNfbGluZS5iZWdpblBhdGgoKTtcclxuICAgICAgICAgICAgICAgIGNhbnZhc19saW5lLm1vdmVUbyhjX3gsIGNfeSk7XHJcbiAgICAgICAgICAgIH1lbHNlIGlmKG9wdGlvbnMucGF0dGVybiA9PSBcInJjZVwiKXtcclxuICAgICAgICAgICAgICAgIGlzQWxsb3dEcmF3TGluZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAvL+iOt+WPlum8oOagh+aMieS4i+eahOeCueebuOWvuWNhbnZhc+eahOWdkOagh+OAglxyXG4gICAgICAgICAgICAgICAgbGV0IGVsZSA9IHdpbmRvd1RvQ2FudmFzKGNhbnZhcywgZS5jbGllbnRYLCBlLmNsaWVudFkpO1xyXG4gICAgICAgICAgICAgICAgLy9lczbnmoTop6PmnoTotYvlgLxcclxuICAgICAgICAgICAgICAgIGNfeCAgPSBlbGVbJ3gnXTtcclxuICAgICAgICAgICAgICAgIGNfeSAgPSBlbGVbJ3knXTtcclxuICAgICAgICAgICAgICAgIC8v5Yib5bu657q/5p2h55S75biDXHJcbiAgICAgICAgICAgICAgICBjYW52YXNfcmNlID0gY2FudmFzUGFyYW1ldGVyKCdyZWMnKTtcclxuICAgICAgICAgICAgfWVsc2UgaWYob3B0aW9ucy5wYXR0ZXJuID09IFwiYXJjXCIpe1xyXG4gICAgICAgICAgICAgICAgaXNBbGxvd0RyYXdMaW5lID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIC8v6I635Y+W6byg5qCH5oyJ5LiL55qE54K555u45a+5Y2FudmFz55qE5Z2Q5qCH44CCXHJcbiAgICAgICAgICAgICAgICBsZXQgZWxlID0gd2luZG93VG9DYW52YXMoY2FudmFzLCBlLmNsaWVudFgsIGUuY2xpZW50WSk7XHJcbiAgICAgICAgICAgICAgICAvL2VzNueahOino+aehOi1i+WAvFxyXG4gICAgICAgICAgICAgICAgY194ICA9IGVsZVsneCddO1xyXG4gICAgICAgICAgICAgICAgY195ICA9IGVsZVsneSddO1xyXG4gICAgICAgICAgICAgICAgY2FudmFzX2FyYyA9IGNhbnZhc1BhcmFtZXRlcignYXJjJyk7Ly/liJvlu7rlnIbnlLvluINcclxuICAgICAgICAgICAgfWVsc2UgaWYob3B0aW9ucy5wYXR0ZXJuID09IFwiZm9udFwiKXtcclxuXHJcbiAgICAgICAgICAgICAgICAvL+e7mOWItueureWktFxyXG4gICAgICAgICAgICAgICAgbGV0IGVsZSA9IHdpbmRvd1RvQ2FudmFzKGNhbnZhcywgZS5jbGllbnRYLCBlLmNsaWVudFkpO1xyXG4gICAgICAgICAgICAgICAgbGV0IHRleHRhcmVhID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLl9jYW52YXMgLmNhbnZhcy10ZXh0YXJlYScpO1xyXG4gICAgICAgICAgICAgICAgLy/liJvlu7rlr4zmlofmnKzmoYZcclxuICAgICAgICAgICAgICAgIGlmKCF0ZXh0YXJlYSl7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dGFyZWEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGV4dGFyZWFcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dGFyZWEuc2V0QXR0cmlidXRlKCdjbGFzcycsJ2NhbnZhcy10ZXh0YXJlYScpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbnZhTm9kZS5hcHBlbmRDaGlsZCh0ZXh0YXJlYSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dGFyZWEuc3R5bGUubGVmdCA9IGVsZVsneCddKydweCc7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dGFyZWEuc3R5bGUudG9wID0gZWxlWyd5J10rJ3B4JztcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0YXJlYS5mb2N1cygpO1xyXG4gICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgLy/lpITnkIbmloflrZcg55S75p2/55qE5LqL5oOFXHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dGFyZWEub25ibHVyID0gZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYodGV4dGFyZWEudmFsdWUpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/mnInlgLznmoTmg4XlhrVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjYW52YXNfZm9udCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdG9wID0gdGV4dGFyZWEub2Zmc2V0VG9wO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChvcHRpb25zLmZvbnQuc3BlYykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJzbWFsbFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW52YXNfZm9udC5mb250ID0gXCIxNHB4IEdlb3JnaWEgbm9ybWFsXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcCA9IHRvcCsxNDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIm1pZGRsZVwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW52YXNfZm9udC5mb250ID0gXCIxOHB4IEdlb3JnaWEgbm9ybWFsXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvcCA9IHRvcCsxODtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FudmFzX2ZvbnQuZm9udCA9IFwiMjRweCBHZW9yZ2lhIGJvbGRcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wID0gdG9wKzI0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbnZhc19mb250LmZpbGxTdHlsZSA9IG9wdGlvbnNbJ2ZvbnQnXVsnY29sb3InXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbnZhc19mb250LmZpbGxUZXh0KHRleHRhcmVhLnZhbHVlLHRleHRhcmVhLm9mZnNldExlZnQsdG9wKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbnZhTm9kZS5yZW1vdmVDaGlsZCh0ZXh0YXJlYSk7Ly/liKDpmaToioLngrlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5re75YqgIGltZ0RhdGFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlY29yZC5wdXNoKGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIikuZ2V0SW1hZ2VEYXRhKDAsIDAsIG9wdGlvbnMuY2FudmFzX3csIG9wdGlvbnMuY2FudmFzX2gpKTsvL+S/neWtmOeUu+W4g+eahOWDj+e0oOWAvFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9O1xyXG4gICAgICAgIGNhbnZhcy5vbm1vdXNlbW92ZSA9IChlKSA9PiB7XHJcbiAgICAgICAgICAgIC8v6byg5qCH56e75YqoXHJcbiAgICAgICAgICAgIGlmKG9wdGlvbnMucGF0dGVybiA9PSBcImxpbmVcIil7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXNBbGxvd0RyYXdMaW5lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy/np7vliqjml7bojrflj5bmlrDnmoTlnZDmoIfkvY3nva7vvIznlKhsaW5lVG/orrDlvZXlvZPliY3nmoTlnZDmoIfvvIznhLblkI5zdHJva2Xnu5jliLbkuIrkuIDkuKrngrnliLDlvZPliY3ngrnnmoTot6/lvoRcclxuICAgICAgICAgICAgICAgICAgICBsZXQgZWxlID0gd2luZG93VG9DYW52YXMoY2FudmFzLCBlLmNsaWVudFgsIGUuY2xpZW50WSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHt4LCB5fSA9IGVsZTtcclxuICAgICAgICAgICAgICAgICAgICAvL+iuvue9ruivpeeUu+W4g+eahOacgOWQjuS4gOS4queKtuaAgVxyXG4gICAgICAgICAgICAgICAgICAgIGNhbnZhc19saW5lLmxpbmVUbyh4LCB5KTtcclxuICAgICAgICAgICAgICAgICAgICBjYW52YXNfbGluZS5zdHJva2UoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfWVsc2UgaWYob3B0aW9ucy5wYXR0ZXJuID09IFwicmNlXCIpe1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChpc0FsbG93RHJhd0xpbmUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvL+enu+WKqOaXtuiOt+WPluaWsOeahOWdkOagh+S9jee9ru+8jOeUqGxpbmVUb+iusOW9leW9k+WJjeeahOWdkOagh++8jOeEtuWQjnN0cm9rZee7mOWItuS4iuS4gOS4queCueWIsOW9k+WJjeeCueeahOi3r+W+hFxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBlbGUgPSB3aW5kb3dUb0NhbnZhcyhjYW52YXMsIGUuY2xpZW50WCwgZS5jbGllbnRZKTtcclxuICAgICAgICAgICAgICAgICAgICAvL+a4heepuueUu+W4g1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbnZhc19yY2UuY2xlYXJSZWN0KDAsIDAsIG9wdGlvbnMuY2FudmFzX3csIG9wdGlvbnMuY2FudmFzX2gpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlY29yZC5sZW5ndGggPiAwKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FudmFzX3JjZS5wdXRJbWFnZURhdGEocmVjb3JkW3JlY29yZC5sZW5ndGgtMV0sMCwwKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy/lvqrnjq/nlLvnn6nlvaJcclxuICAgICAgICAgICAgICAgICAgICByZWNzLmZvckVhY2goZnVuY3Rpb24gKHYsaSxhcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FudmFzX3JjZS5zdHJva2VSZWN0KHYueCx2Lnksdi53aWR0aCx2LmhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHcgPSBlbGVbJ3gnXS1jX3gsaCA9IGVsZVsneSddLWNfeTtcclxuICAgICAgICAgICAgICAgICAgICBjYW52YXNfcmNlLnN0cm9rZVJlY3QoY194LGNfeSx3LGgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRlbXBvcmFyeSA9IG5ldyBSZWNYeShjX3gsY195LHcsaCk7Ly/mnoTpgKDkuLTml7bnn6nlvaJcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH1lbHNlIGlmKG9wdGlvbnMucGF0dGVybiA9PSBcImFyY1wiKXtcclxuICAgICAgICAgICAgICAgIGlmIChpc0FsbG93RHJhd0xpbmUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvL+enu+WKqOaXtuiOt+WPluaWsOeahOWdkOagh+S9jee9ru+8jOeUqGxpbmVUb+iusOW9leW9k+WJjeeahOWdkOagh++8jOeEtuWQjnN0cm9rZee7mOWItuS4iuS4gOS4queCueWIsOW9k+WJjeeCueeahOi3r+W+hFxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBlbGUgPSB3aW5kb3dUb0NhbnZhcyhjYW52YXMsIGUuY2xpZW50WCwgZS5jbGllbnRZKTtcclxuICAgICAgICAgICAgICAgICAgICAvL+a4heepuueUu+W4g1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbnZhc19hcmMuY2xlYXJSZWN0KDAsIDAsIG9wdGlvbnMuY2FudmFzX3csIG9wdGlvbnMuY2FudmFzX2gpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlY29yZC5sZW5ndGggPiAwKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FudmFzX2FyYy5wdXRJbWFnZURhdGEocmVjb3JkW3JlY29yZC5sZW5ndGgtMV0sMCwwKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy/lvqrnjq/nlLtcclxuICAgICAgICAgICAgICAgICAgICBhcmNzLmZvckVhY2goZnVuY3Rpb24gKHYsaSxhcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgRWxsaXBzZVR3byhjYW52YXNfYXJjLCB2Wyd4J10sdlsneSddLHZbJ3hyJ10sdlsneXInXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy/kuK3lv4PlnZDmoIfnmoTkvY3nva5cclxuICAgICAgICAgICAgICAgICAgICBsZXQgeHIgPSBNYXRoLmFicygoZWxlWyd4J10tY194KS8yKSx5ciA9IE1hdGguYWJzKChlbGVbJ3knXS1jX3kpLzIpLHh4ID0gZWxlWyd4J10tKGVsZVsneCddLWNfeCkvMix5eSA9IGVsZVsneSddLShlbGVbJ3knXS1jX3kpLzI7XHJcbiAgICAgICAgICAgICAgICAgICAgRWxsaXBzZVR3byhjYW52YXNfYXJjLCB4eCx5eSx4cix5cik7XHJcbiAgICAgICAgICAgICAgICAgICAgdGVtcG9yYXJ5ID0gbmV3IEFyY1h5KHh4LHl5LHhyLHlyKTsvL+aehOmAoOS4tOaXtuWchuW9olxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9O1xyXG4gICAgICAgIGNhbnZhcy5vbm1vdXNldXAgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8v6byg5qCH56a75byAXHJcbiAgICAgICAgICAgIGlmKG9wdGlvbnMucGF0dGVybiA9PSBcImxpbmVcIil7XHJcbiAgICAgICAgICAgICAgICBpc0FsbG93RHJhd0xpbmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHJlY29yZC5wdXNoKGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIikuZ2V0SW1hZ2VEYXRhKDAsIDAsIG9wdGlvbnMuY2FudmFzX3csIG9wdGlvbnMuY2FudmFzX2gpKTsvL+S/neWtmOeUu+W4g+eahOWDj+e0oOWAvFxyXG4gICAgICAgICAgICB9ZWxzZSBpZihvcHRpb25zLnBhdHRlcm4gPT0gXCJyY2VcIil7XHJcbiAgICAgICAgICAgICAgICBpc0FsbG93RHJhd0xpbmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHJlY3MucHVzaCh0ZW1wb3JhcnkpOy8v5re75Yqg55+p5b2iXHJcbiAgICAgICAgICAgICAgICByZWNvcmQucHVzaChjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpLmdldEltYWdlRGF0YSgwLCAwLCBvcHRpb25zLmNhbnZhc193LCBvcHRpb25zLmNhbnZhc19oKSk7Ly/kv53lrZjnlLvluIPnmoTlg4/ntKDlgLxcclxuICAgICAgICAgICAgfWVsc2UgaWYob3B0aW9ucy5wYXR0ZXJuID09IFwiYXJjXCIpe1xyXG4gICAgICAgICAgICAgICAgaXNBbGxvd0RyYXdMaW5lID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBhcmNzLnB1c2godGVtcG9yYXJ5KTsvL+a3u+WKoFxyXG4gICAgICAgICAgICAgICAgcmVjb3JkLnB1c2goY2FudmFzLmdldENvbnRleHQoXCIyZFwiKS5nZXRJbWFnZURhdGEoMCwgMCwgb3B0aW9ucy5jYW52YXNfdywgb3B0aW9ucy5jYW52YXNfaCkpOy8v5L+d5a2Y55S75biD55qE5YOP57Sg5YC8XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlY29yZCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy/mnoTpgKDkuIDkuKrnn6nlvaLlnZDmoIdcclxuICAgICAgICBmdW5jdGlvbiBSZWNYeSh4eCx5eSx3aWR0aCxoZWlnaHQpIHtcclxuICAgICAgICAgICAgdGhpcy54ID0geHg7XHJcbiAgICAgICAgICAgIHRoaXMueSA9IHl5O1xyXG4gICAgICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7XHJcbiAgICAgICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBSZWNYeS5wcm90b3R5cGUgPSB7XHJcbiAgICAgICAgICAgIGNvbnN0cnVjdG9yIDogUmVjWHksXHJcbiAgICAgICAgICAgIGdldENvbmZpZyA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvL+aehOmAoOS4gOS4quWchuW9ouWdkOagh1xyXG4gICAgICAgIGZ1bmN0aW9uIEFyY1h5KHh4LHl5LHhyLHlyKSB7XHJcbiAgICAgICAgICAgIHRoaXMueCA9IHh4O1xyXG4gICAgICAgICAgICB0aGlzLnkgPSB5eTtcclxuICAgICAgICAgICAgdGhpcy54ciA9IHhyO1xyXG4gICAgICAgICAgICB0aGlzLnlyID0geXI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIEFyY1h5LnByb3RvdHlwZSA9IHtcclxuICAgICAgICAgICAgY29uc3RydWN0b3IgOiBBcmNYeSxcclxuICAgICAgICAgICAgZ2V0Q29uZmlnIDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvL+Wdh+WMgOWOi+e8qeazlVxyXG4gICAgICAgIGZ1bmN0aW9uIEVsbGlwc2VUd28oY29udGV4dCwgeCwgeSwgYSwgYikge1xyXG4gICAgICAgICAgICBjb250ZXh0LnNhdmUoKTtcclxuICAgICAgICAgICAgdmFyIHIgPSAoYSA+IGIpID8gYSA6IGI7XHJcbiAgICAgICAgICAgIHZhciByYXRpb1ggPSBhIC8gcjtcclxuICAgICAgICAgICAgdmFyIHJhdGlvWSA9IGIgLyByO1xyXG4gICAgICAgICAgICBjb250ZXh0LnNjYWxlKHJhdGlvWCwgcmF0aW9ZKTtcclxuICAgICAgICAgICAgY29udGV4dC5iZWdpblBhdGgoKTtcclxuICAgICAgICAgICAgY29udGV4dC5hcmMoeCAvIHJhdGlvWCwgeSAvIHJhdGlvWSwgciwgMCwgMiAqIE1hdGguUEksIGZhbHNlKTtcclxuICAgICAgICAgICAgY29udGV4dC5jbG9zZVBhdGgoKTtcclxuICAgICAgICAgICAgY29udGV4dC5yZXN0b3JlKCk7XHJcbiAgICAgICAgICAgIGNvbnRleHQuc3Ryb2tlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB3aW5kb3cub25yZXNpemUgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAvLyBjYW52YXMud2lkdGggPSBjYW52YU5vZGUub2Zmc2V0V2lkdGg7XHJcbiAgICAgICAgICAgIC8vIGNhbnZhcy5oZWlnaHQgPSBjYW52YU5vZGUub2Zmc2V0SGVpZ2h0O1xyXG4gICAgICAgICAgICAvL+mHjeaWsOe7mOWItlxyXG4gICAgICAgIH07XHJcblxyXG5cclxuICAgICAgICAvL+WIm+W7uuaTjeS9nOiPnOWNlVxyXG4gICAgICAgIGZ1bmN0aW9uIHNldE5hdnMoKXtcclxuICAgICAgICAgICAgbGV0IG5hdnMgPSBgXHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2FudmFzLW5hdlwiPlxyXG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaXRlbSBfd2l0aGRyYXdcIj7mkqTlm548L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIml0ZW0gX2xpbmVcIj7nur88L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIml0ZW0gX3JlY1wiPuefqeW9ojwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaXRlbSBfYXJjXCI+5ZyGPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpdGVtIF9mb250XCI+5YaZ5a2XPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJpdGVtIF9hcnJvd3NcIj7nrq3lpLQ8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgYDtcclxuICAgICAgICAgICAgY2FudmFOb2RlLmluc2VydEFkamFjZW50SFRNTCgnYWZ0ZXJiZWdpbicsbmF2cyk7XHJcblxyXG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2FudmFzLW5hdiAuX3dpdGhkcmF3JykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICAvL+aSpOWbnlxyXG4gICAgICAgICAgICAgICAgaWYocmVjb3JkLmxlbmd0aCA+IDApe1xyXG4gICAgICAgICAgICAgICAgICAgIHJlY3MgID0gW107IGFyY3MgID0gW107XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlY29yZC5sZW5ndGggPT0gMSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY29yZC5wb3AoKTsvL+enu+mZpOacgOWQjuS4gOmhuVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpLmNsZWFyUmVjdCgwLCAwLCBvcHRpb25zLmNhbnZhc193LCBvcHRpb25zLmNhbnZhc19oKTtcclxuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVjb3JkLnBvcCgpOy8v56e76Zmk5pyA5ZCO5LiA6aG5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIikucHV0SW1hZ2VEYXRhKHJlY29yZFtyZWNvcmQubGVuZ3RoLTFdLDAsMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZWNvcmQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYW52YXMtbmF2IC5fZm9udCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJyxmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgICAgIG9wdGlvbnMucGF0dGVybiA9IFwiZm9udFwiO1xyXG5cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2FudmFzLW5hdiAuX2xpbmUnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgIC8vXHJcbiAgICAgICAgICAgICAgICBvcHRpb25zLnBhdHRlcm4gPSBcImxpbmVcIjtcclxuXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhbnZhcy1uYXYgLl9yZWMnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgIC8v5pKk5ZueXHJcbiAgICAgICAgICAgICAgICBvcHRpb25zLnBhdHRlcm4gPSBcInJjZVwiO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYW52YXMtbmF2IC5fYXJjJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICAvL+aSpOWbnlxyXG4gICAgICAgICAgICAgICAgb3B0aW9ucy5wYXR0ZXJuID0gXCJhcmNcIjtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIH1cclxuXHJcblxyXG5cclxuXHJcblxyXG4gICAgfTtcclxuXHJcbn0pKHdpbmRvdyk7XHJcblxyXG5uZXcgRHJhd2luZygpO1xyXG5cclxuIl0sInNvdXJjZVJvb3QiOiIifQ==